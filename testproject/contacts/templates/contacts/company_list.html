{% extends 'contacts/base.html' %}

{% block content %}

{% for company in results %}
  <div class="row">
    <div class="col-md-4">
        <p class="text-left">{{ company.name }}</p>
        <p class="text-left">{{ company.address_line1 }}</p>
        <p class="text-left">{{ company.address_line2 }}</p>
        <p class="text-left">{{ company.phone_number }}</p>
        <p class="text-left"><a href='{{ company.homepage }}'>{{ company.homepage }}</a></p>
        <br>
    </div>
    <div class="col-md-4"></div>
    <div class="col-md-4"></div>
  </div>
  <div class="row">
    <div class="col-md-1"></div>
    <div class="col-md-11">
        <div class="table-responsive">
        <table class="table table-striped table-bordered">
           <tr>
             <th class="info">Name</th>
             <th class="info">Phone number</th>
             <th class="info">Email</th>
          </tr>
          {% for contact in company.contacts %}
          <tr>
            <td class="picture"><p class="text-left">{{ contact.first_name }} {{ contact.last_name }}</p></td>
            <td><p class="text-left">{{ contact.phone_number }}</p></td>
            <td>
                <a href='{% url 'contacts.views.contact_detail' pk=contact.pk %}'>
                <p class="text-left">{{ contact.email }}</p>
                </a></td>
          </tr>
          {% endfor %}
        </table>
        </div>
    </div>
  </div>
  <br>
{% endfor %}

<!-- Creates the bootstrap modal where the image will appear -->
<div class="modal fade" id="imagemodal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
        <h4 class="modal-title" id="myModalLabel">Image preview</h4>
      </div>
      <div class="modal-body">
        <img src="" id="imagepreview" style="width: 400px; height: 264px;" >
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

{% endblock content %}

{% block scripts %}
<script>
  console.log('edu');
  $(".picture").hover(function() {
      $('#imagepreview').attr('src', $('#imageresource').attr('src')); // here asign the image to the modal when the user click the enlarge link
      $('#imagemodal').modal('show'); // imagemodal is the id attribute assigned to the bootstrap modal, then i use the show function
  });
</script>
{% endblock scripts %}
